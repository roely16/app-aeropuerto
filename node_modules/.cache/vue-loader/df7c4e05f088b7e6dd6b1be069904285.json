{"remainingRequest":"/Applications/XAMPP/xamppfiles/htdocs/apps/app-transmetro/node_modules/vue-loader/lib/index.js??vue-loader-options!/Applications/XAMPP/xamppfiles/htdocs/apps/app-transmetro/src/views/Login.vue?vue&type=style&index=0&id=26084dc2&scoped=true&lang=css&","dependencies":[{"path":"/Applications/XAMPP/xamppfiles/htdocs/apps/app-transmetro/src/views/Login.vue","mtime":1598538870910},{"path":"/Applications/XAMPP/xamppfiles/htdocs/apps/app-transmetro/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Applications/XAMPP/xamppfiles/htdocs/apps/app-transmetro/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Applications/XAMPP/xamppfiles/htdocs/apps/app-transmetro/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Applications/XAMPP/xamppfiles/htdocs/apps/app-transmetro/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Applications/XAMPP/xamppfiles/htdocs/apps/app-transmetro/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCmh0bWwsIGJvZHkgewptaW4taGVpZ2h0OjEwMCU7aGVpZ2h0OjEwMCU7Cn0KLnJlZC1iYWNrZ3JvdW5kLW5vdC1vbi1ib2R5LW9yLWh0bWwgewpiYWNrZ3JvdW5kLWNvbG9yOiAjRUY0MjQ3OyAgICAKbWluLWhlaWdodDoxMDAlOwp9Cg=="},{"version":3,"sources":["Login.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8CA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Login.vue","sourceRoot":"src/views","sourcesContent":["<template>\n    <div style=\"background-image: url('./img/fondoLogin.png'); height: 110vh; background-size:cover;\">\n        <b-container >\n            <b-row align-h=\"center\" style=\"height: 40vh\">\n                <b-col sm=\"6\" lg=\"6\" md=\"6\">\n                    <b-img center width=\"200\" src=\"./img/logo_muni_circulo.png\" fluid alt=\"Responsive image\"></b-img>\n                </b-col>\n            </b-row>\n            <b-form style=\"height: 30vh\" @submit.prevent=\"login\">\n                <b-row class=\"text-center\">\n\n                    <b-col cols=\"12\" sm=\"12\" md=\"6\" offset-md=\"3\">\n                        <b-form-group style=\"color: white\" label=\"Usuario\" label-size=\"lg\">\n                            <b-form-input type=\"text\" style=\"text-align:center;\" v-model=\"usuario.usuario\" autocomplete=\"off\" size=\"lg\" required></b-form-input>\n                        </b-form-group>\n                    </b-col>\n\n                    <b-col cols=\"12\" v-if=\"loginError\">\n                        \n                        <h4 style=\"color: yellow\">Usuario Inválido !!</h4>\n                    </b-col>\n\n                    <b-col cols=\"12\" class=\"text-center pt-4\">\n                        <b-button variant=\"success\" type=\"submit\" size=\"lg\">ACEPTAR</b-button>\n                    </b-col>\n\n                </b-row>\n            </b-form>\n\n            <b-row class=\"text-center\" style=\"height: 30vh\" align-v=\"end\">\n                <b-col cols=\"12\">\n                    \n                </b-col>\n                <b-col cols=\"12\" class=\"pt-4 text-white text-center\">\n                    <b-img width=\"200\" src=\"./img/juntoslogramosmas.png\" fluid alt=\"Responsive image\"></b-img>\n                    <br>\n                    ¿No tiene cuenta? \n                    <b-button :to=\"{name: 'registro'}\" variant=\"link\"><h4 style=\"color: yellow\">Registrarse</h4></b-button>\n                </b-col>\n            </b-row>\n\n        </b-container>\n    </div>\n</template>\n\n<style scoped>\n    html, body {\n    min-height:100%;height:100%;\n    }\n    .red-background-not-on-body-or-html {\n    background-color: #EF4247;    \n    min-height:100%;\n    }\n</style>\n\n<script>\n\n    import Swal from 'sweetalert2'\n\n    export default {\n        data(){\n            return{\n                usuario: {},\n                loginError: false\n            }\n        },\n        methods: {\n            login(){\n\n                this.loginError = false\n\n                this.axios.post(process.env.VUE_APP_API_URL + '/login.php', this.usuario)\n\t\t\t\t.then((response) => {\n\n                    if (!response.data) {\n\t\t\t\t\t\t\n\t\t\t\t\t\tthis.loginError = true\n\n                    }else{\n\n\t\t\t\t\t\t// Si el usuario es correcto validar si ya esta activa la cuenta\n\n\t\t\t\t\t\tlet data = {\n\t\t\t\t\t\t\tid: response.data.id\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tthis.axios.post(process.env.VUE_APP_API_URL + '/cuenta_verificada.php', data)\n\t\t\t\t\t\t.then((response) => {\n\n\t\t\t\t\t\t\tthis.credentials = response.data\n\n\t\t\t\t\t\t\tif (response.data.verificada) {\n\n\t\t\t\t\t\t\t\tlocalStorage.setItem('usuario-auditoria-transporte', JSON.stringify(this.credentials))\n\n\t\t\t\t\t\t\t\tthis.$router.push({ name: 'menu' })\n\n\t\t\t\t\t\t\t}else{\n\n\t\t\t\t\t\t\t\tSwal.fire({\n\t\t\t\t\t\t\t\t\ttitle: 'Activación de cuenta',\n\t\t\t\t\t\t\t\t\ttext: \"Su cuenta aún no ha sido activada, ¿desea reenviar el correo para activación?\",\n\t\t\t\t\t\t\t\t\ticon: 'warning',\n\t\t\t\t\t\t\t\t\tshowCancelButton: true,\n\t\t\t\t\t\t\t\t\tconfirmButtonColor: '#3085d6',\n\t\t\t\t\t\t\t\t\tcancelButtonColor: '#d33',\n\t\t\t\t\t\t\t\t\tconfirmButtonText: 'Si, reenviar!',\n\t\t\t\t\t\t\t\t\tcancelButtonText: 'Cancelar',\n\t\t\t\t\t\t\t\t\tshowLoaderOnConfirm: true,\n\t\t\t\t\t\t\t\t\tpreConfirm: () => {\n\n\t\t\t\t\t\t\t\t\t\tlet usuario = {\n\t\t\t\t\t\t\t\t\t\t\tid: response.data.id\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\treturn this.axios.post(process.env.VUE_APP_API_URL + '/reenviar_correo.php', usuario)\n\t\t\t\t\t\t\t\t\t\t// eslint-disable-next-line no-unused-vars\n\t\t\t\t\t\t\t\t\t\t.then((response) => {\n\n\t\t\t\t\t\t\t\t\t\t\tSwal.fire(\n\t\t\t\t\t\t\t\t\t\t\t\t'Excelente!',\n\t\t\t\t\t\t\t\t\t\t\t\t'<p>Se ha enviado un correo electrónico a la dirección registrada, por favor revise su buzón y siga las instrucciones indicadas para activar su cuenta.</p>',\n\t\t\t\t\t\t\t\t\t\t\t\t'success'\n\t\t\t\t\t\t\t\t\t\t\t)\n\n\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\tallowOutsideClick: () => !Swal.isLoading()\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t})\n\n                    }\n\n                })\n\n            }\n        }        \n    }\n</script>"]}]}